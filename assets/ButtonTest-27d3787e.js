import{m as ze,n as fe,q as Re,x as be,y as te,z as Se,A as Le,B as ve,C as We,r as H,D as $e,F as Ae,G as se,H as V,I as Fe,J as Xe,K as Ye,L as oe,M as Ke,N as Oe,O as we,P as ne,Q as ye,R as Pe,S as ge,o as M,c as X,d as ie,e as ke,l as Z,T as Ue,b as n,U as K,V as _e,W as Q,X as Ie,Y as xe,Z as je,$ as He,a0 as Ge,a1 as qe,a2 as Je,a3 as ue,a4 as ae,a5 as re,a6 as de,a7 as Qe,a8 as Ze,i as Ee,a9 as De}from"./index-f6fe3374.js";import{E as et}from"./el-input-number-98ee797c.js";import{U as le,I as Ve,C as Me}from"./el-input-77ecaa04.js";var tt=/\s/;function nt(e){for(var t=e.length;t--&&tt.test(e.charAt(t)););return t}var lt=/^\s+/;function at(e){return e&&e.slice(0,nt(e)+1).replace(lt,"")}var Be=0/0,rt=/^[-+]0x[0-9a-f]+$/i,ot=/^0b[01]+$/i,st=/^0o[0-7]+$/i,it=parseInt;function Te(e){if(typeof e=="number")return e;if(ze(e))return Be;if(fe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=fe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=at(e);var a=ot.test(e);return a||st.test(e)?it(e.slice(2),a?2:8):rt.test(e)?Be:+e}var ut=function(){return Re.Date.now()};const me=ut;var dt="Expected a function",mt=Math.max,ct=Math.min;function Ce(e,t,a){var l,s,m,r,f,g,d=0,b=!1,o=!1,w=!0;if(typeof e!="function")throw new TypeError(dt);t=Te(t)||0,fe(a)&&(b=!!a.leading,o="maxWait"in a,m=o?mt(Te(a.maxWait)||0,t):m,w="trailing"in a?!!a.trailing:w);function x(i){var T=l,z=s;return l=s=void 0,d=i,r=e.apply(z,T),r}function P(i){return d=i,f=setTimeout(B,t),b?x(i):r}function I(i){var T=i-g,z=i-d,W=t-T;return o?ct(W,m-z):W}function C(i){var T=i-g,z=i-d;return g===void 0||T>=t||T<0||o&&z>=m}function B(){var i=me();if(C(i))return k(i);f=setTimeout(B,I(i))}function k(i){return f=void 0,w&&l?x(i):(l=s=void 0,r)}function p(){f!==void 0&&clearTimeout(f),d=0,l=g=s=f=void 0}function E(){return f===void 0?r:k(me())}function y(){var i=me(),T=C(i);if(l=arguments,s=this,g=i,T){if(f===void 0)return P(g);if(o)return clearTimeout(f),f=setTimeout(B,t),x(g)}return f===void 0&&(f=setTimeout(B,t)),r}return y.cancel=p,y.flush=E,y}const pe=Symbol("sliderContextKey"),ft=be({modelValue:{type:te([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Se,inputSize:Se,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:te(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:te(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Le,default:"top"},marks:{type:te(Object)},validateEvent:{type:Boolean,default:!0}}),ce=e=>ve(e)||We(e)&&e.every(ve),vt={[le]:ce,[Ve]:ce,[Me]:ce},gt=(e,t,a)=>{const l=H();return $e(async()=>{e.range?(Array.isArray(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(typeof e.modelValue!="number"||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),Ae(window,"resize",a),await se(),a()}),{sliderWrapper:l}},bt=e=>V(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((a,l)=>a-l).filter(a=>a<=e.max&&a>=e.min).map(a=>({point:a,position:(a-e.min)*100/(e.max-e.min),mark:e.marks[a]})):[]),yt=(e,t,a)=>{const{form:l,formItem:s}=Fe(),m=Xe(),r=H(),f=H(),g={firstButton:r,secondButton:f},d=V(()=>e.disabled||(l==null?void 0:l.disabled)||!1),b=V(()=>Math.min(t.firstValue,t.secondValue)),o=V(()=>Math.max(t.firstValue,t.secondValue)),w=V(()=>e.range?`${100*(o.value-b.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),x=V(()=>e.range?`${100*(b.value-e.min)/(e.max-e.min)}%`:"0%"),P=V(()=>e.vertical?{height:e.height}:{}),I=V(()=>e.vertical?{height:w.value,bottom:x.value}:{width:w.value,left:x.value}),C=()=>{m.value&&(t.sliderSize=m.value[`client${e.vertical?"Height":"Width"}`])},B=v=>{const S=e.min+v*(e.max-e.min)/100;if(!e.range)return r;let N;return Math.abs(b.value-S)<Math.abs(o.value-S)?N=t.firstValue<t.secondValue?"firstButton":"secondButton":N=t.firstValue>t.secondValue?"firstButton":"secondButton",g[N]},k=v=>{const S=B(v);return S.value.setPosition(v),S},p=v=>{t.firstValue=v,y(e.range?[b.value,o.value]:v)},E=v=>{t.secondValue=v,e.range&&y([b.value,o.value])},y=v=>{a(le,v),a(Ve,v)},i=async()=>{await se(),a(Me,e.range?[b.value,o.value]:e.modelValue)},T=v=>{var S,N,G,q,J,j;if(d.value||t.dragging)return;C();let Y=0;if(e.vertical){const R=(G=(N=(S=v.touches)==null?void 0:S.item(0))==null?void 0:N.clientY)!=null?G:v.clientY;Y=(m.value.getBoundingClientRect().bottom-R)/t.sliderSize*100}else{const R=(j=(J=(q=v.touches)==null?void 0:q.item(0))==null?void 0:J.clientX)!=null?j:v.clientX,$=m.value.getBoundingClientRect().left;Y=(R-$)/t.sliderSize*100}if(!(Y<0||Y>100))return k(Y)};return{elFormItem:s,slider:m,firstButton:r,secondButton:f,sliderDisabled:d,minValue:b,maxValue:o,runwayStyle:P,barStyle:I,resetSize:C,setPosition:k,emitChange:i,onSliderWrapperPrevent:v=>{var S,N;((S=g.firstButton.value)!=null&&S.dragging||(N=g.secondButton.value)!=null&&N.dragging)&&v.preventDefault()},onSliderClick:v=>{T(v)&&i()},onSliderDown:async v=>{const S=T(v);S&&(await se(),S.value.onButtonDown(v))},setFirstValue:p,setSecondValue:E}},{left:Vt,down:ht,right:St,up:wt,home:kt,end:xt,pageUp:Et,pageDown:Bt}=Ke,Tt=(e,t,a)=>{const l=H(),s=H(!1),m=V(()=>t.value instanceof Function),r=V(()=>m.value&&t.value(e.modelValue)||e.modelValue),f=Ce(()=>{a.value&&(s.value=!0)},50),g=Ce(()=>{a.value&&(s.value=!1)},50);return{tooltip:l,tooltipVisible:s,formatValue:r,displayTooltip:f,hideTooltip:g}},Ct=(e,t,a)=>{const{disabled:l,min:s,max:m,step:r,showTooltip:f,precision:g,sliderSize:d,formatTooltip:b,emitChange:o,resetSize:w,updateDragging:x}=Ye(pe),{tooltip:P,tooltipVisible:I,formatValue:C,displayTooltip:B,hideTooltip:k}=Tt(e,b,f),p=H(),E=V(()=>`${(e.modelValue-s.value)/(m.value-s.value)*100}%`),y=V(()=>e.vertical?{bottom:E.value}:{left:E.value}),i=()=>{t.hovering=!0,B()},T=()=>{t.hovering=!1,t.dragging||k()},z=u=>{l.value||(u.preventDefault(),Y(u),window.addEventListener("mousemove",R),window.addEventListener("touchmove",R),window.addEventListener("mouseup",$),window.addEventListener("touchend",$),window.addEventListener("contextmenu",$),p.value.focus())},W=u=>{l.value||(t.newPosition=Number.parseFloat(E.value)+u/(m.value-s.value)*100,O(t.newPosition),o())},_=()=>{W(-r.value)},v=()=>{W(r.value)},S=()=>{W(-r.value*4)},N=()=>{W(r.value*4)},G=()=>{l.value||(O(0),o())},q=()=>{l.value||(O(100),o())},J=u=>{let h=!0;[Vt,ht].includes(u.key)?_():[St,wt].includes(u.key)?v():u.key===kt?G():u.key===xt?q():u.key===Bt?S():u.key===Et?N():h=!1,h&&u.preventDefault()},j=u=>{let h,A;return u.type.startsWith("touch")?(A=u.touches[0].clientY,h=u.touches[0].clientX):(A=u.clientY,h=u.clientX),{clientX:h,clientY:A}},Y=u=>{t.dragging=!0,t.isClick=!0;const{clientX:h,clientY:A}=j(u);e.vertical?t.startY=A:t.startX=h,t.startPosition=Number.parseFloat(E.value),t.newPosition=t.startPosition},R=u=>{if(t.dragging){t.isClick=!1,B(),w();let h;const{clientX:A,clientY:U}=j(u);e.vertical?(t.currentY=U,h=(t.startY-t.currentY)/d.value*100):(t.currentX=A,h=(t.currentX-t.startX)/d.value*100),t.newPosition=t.startPosition+h,O(t.newPosition)}},$=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||k(),t.isClick||O(t.newPosition),o()},0),window.removeEventListener("mousemove",R),window.removeEventListener("touchmove",R),window.removeEventListener("mouseup",$),window.removeEventListener("touchend",$),window.removeEventListener("contextmenu",$))},O=async u=>{if(u===null||Number.isNaN(+u))return;u<0?u=0:u>100&&(u=100);const h=100/((m.value-s.value)/r.value);let U=Math.round(u/h)*h*(m.value-s.value)*.01+s.value;U=Number.parseFloat(U.toFixed(g.value)),U!==e.modelValue&&a(le,U),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await se(),t.dragging&&B(),P.value.updatePopper()};return oe(()=>t.dragging,u=>{x(u)}),{disabled:l,button:p,tooltip:P,tooltipVisible:I,showTooltip:f,wrapperStyle:y,formatValue:C,handleMouseEnter:i,handleMouseLeave:T,onButtonDown:z,onKeyDown:J,setPosition:O}},Nt=(e,t,a,l)=>({stops:V(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const r=(e.max-e.min)/e.step,f=100*e.step/(e.max-e.min),g=Array.from({length:r-1}).map((d,b)=>(b+1)*f);return e.range?g.filter(d=>d<100*(a.value-e.min)/(e.max-e.min)||d>100*(l.value-e.min)/(e.max-e.min)):g.filter(d=>d>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:r=>e.vertical?{bottom:`${r}%`}:{left:`${r}%`}}),Lt=(e,t,a,l,s,m)=>{const r=d=>{s(le,d),s(Ve,d)},f=()=>e.range?![a.value,l.value].every((d,b)=>d===t.oldValue[b]):e.modelValue!==t.oldValue,g=()=>{var d,b;e.min>e.max&&Oe("Slider","min should not be greater than max.");const o=e.modelValue;e.range&&Array.isArray(o)?o[1]<e.min?r([e.min,e.min]):o[0]>e.max?r([e.max,e.max]):o[0]<e.min?r([e.min,o[1]]):o[1]>e.max?r([o[0],e.max]):(t.firstValue=o[0],t.secondValue=o[1],f()&&(e.validateEvent&&((d=m==null?void 0:m.validate)==null||d.call(m,"change").catch(w=>we())),t.oldValue=o.slice())):!e.range&&typeof o=="number"&&!Number.isNaN(o)&&(o<e.min?r(e.min):o>e.max?r(e.max):(t.firstValue=o,f()&&(e.validateEvent&&((b=m==null?void 0:m.validate)==null||b.call(m,"change").catch(w=>we())),t.oldValue=o)))};g(),oe(()=>t.dragging,d=>{d||g()}),oe(()=>e.modelValue,(d,b)=>{t.dragging||Array.isArray(d)&&Array.isArray(b)&&d.every((o,w)=>o===b[w])&&t.firstValue===d[0]&&t.secondValue===d[1]||g()},{deep:!0}),oe(()=>[e.min,e.max],()=>{g()})},Pt=be({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Le,default:"top"}}),It={[le]:e=>ve(e)},Mt=["tabindex"],pt=ne({name:"ElSliderButton"}),zt=ne({...pt,props:Pt,emits:It,setup(e,{expose:t,emit:a}){const l=e,s=ye("slider"),m=Pe({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:l.modelValue}),{disabled:r,button:f,tooltip:g,showTooltip:d,tooltipVisible:b,wrapperStyle:o,formatValue:w,handleMouseEnter:x,handleMouseLeave:P,onButtonDown:I,onKeyDown:C,setPosition:B}=Ct(l,m,a),{hovering:k,dragging:p}=ge(m);return t({onButtonDown:I,onKeyDown:C,setPosition:B,hovering:k,dragging:p}),(E,y)=>(M(),X("div",{ref_key:"button",ref:f,class:K([n(s).e("button-wrapper"),{hover:n(k),dragging:n(p)}]),style:Q(n(o)),tabindex:n(r)?-1:0,onMouseenter:y[0]||(y[0]=(...i)=>n(x)&&n(x)(...i)),onMouseleave:y[1]||(y[1]=(...i)=>n(P)&&n(P)(...i)),onMousedown:y[2]||(y[2]=(...i)=>n(I)&&n(I)(...i)),onTouchstart:y[3]||(y[3]=(...i)=>n(I)&&n(I)(...i)),onFocus:y[4]||(y[4]=(...i)=>n(x)&&n(x)(...i)),onBlur:y[5]||(y[5]=(...i)=>n(P)&&n(P)(...i)),onKeydown:y[6]||(y[6]=(...i)=>n(C)&&n(C)(...i))},[ie(n(_e),{ref_key:"tooltip",ref:g,visible:n(b),placement:E.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":E.tooltipClass,disabled:!n(d),persistent:""},{content:ke(()=>[Z("span",null,Ue(n(w)),1)]),default:ke(()=>[Z("div",{class:K([n(s).e("button"),{hover:n(k),dragging:n(p)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,Mt))}});var Ne=Ie(zt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const Rt=be({mark:{type:te([String,Object]),default:void 0}});var Wt=ne({name:"ElSliderMarker",props:Rt,setup(e){const t=ye("slider"),a=V(()=>xe(e.mark)?e.mark:e.mark.label),l=V(()=>xe(e.mark)?void 0:e.mark.style);return()=>je("div",{class:t.e("marks-text"),style:l.value},a.value)}});const $t=["id","role","aria-label","aria-labelledby"],At={key:1},Ft=ne({name:"ElSlider"}),Xt=ne({...Ft,props:ft,emits:vt,setup(e,{expose:t,emit:a}){const l=e,s=ye("slider"),{t:m}=He(),r=Pe({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:f,slider:g,firstButton:d,secondButton:b,sliderDisabled:o,minValue:w,maxValue:x,runwayStyle:P,barStyle:I,resetSize:C,emitChange:B,onSliderWrapperPrevent:k,onSliderClick:p,onSliderDown:E,setFirstValue:y,setSecondValue:i}=yt(l,r,a),{stops:T,getStopStyle:z}=Nt(l,r,w,x),{inputId:W,isLabeledByFormItem:_}=Ge(l,{formItemContext:f}),v=qe(),S=V(()=>l.inputSize||v.value),N=V(()=>l.label||m("el.slider.defaultLabel",{min:l.min,max:l.max})),G=V(()=>l.range?l.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):N.value),q=V(()=>l.formatValueText?l.formatValueText(u.value):`${u.value}`),J=V(()=>l.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),j=V(()=>l.formatValueText?l.formatValueText(h.value):`${h.value}`),Y=V(()=>[s.b(),s.m(v.value),s.is("vertical",l.vertical),{[s.m("with-input")]:l.showInput}]),R=bt(l);Lt(l,r,w,x,a,f);const $=V(()=>{const c=[l.min,l.max,l.step].map(F=>{const D=`${F}`.split(".")[1];return D?D.length:0});return Math.max.apply(null,c)}),{sliderWrapper:O}=gt(l,r,C),{firstValue:u,secondValue:h,sliderSize:A}=ge(r),U=c=>{r.dragging=c};return Je(pe,{...ge(l),sliderSize:A,disabled:o,precision:$,emitChange:B,resetSize:C,updateDragging:U}),t({onSliderClick:p}),(c,F)=>{var D,he;return M(),X("div",{id:c.range?n(W):void 0,ref_key:"sliderWrapper",ref:O,class:K(n(Y)),role:c.range?"group":void 0,"aria-label":c.range&&!n(_)?n(N):void 0,"aria-labelledby":c.range&&n(_)?(D=n(f))==null?void 0:D.labelId:void 0,onTouchstart:F[2]||(F[2]=(...L)=>n(k)&&n(k)(...L)),onTouchmove:F[3]||(F[3]=(...L)=>n(k)&&n(k)(...L))},[Z("div",{ref_key:"slider",ref:g,class:K([n(s).e("runway"),{"show-input":c.showInput&&!c.range},n(s).is("disabled",n(o))]),style:Q(n(P)),onMousedown:F[0]||(F[0]=(...L)=>n(E)&&n(E)(...L)),onTouchstart:F[1]||(F[1]=(...L)=>n(E)&&n(E)(...L))},[Z("div",{class:K(n(s).e("bar")),style:Q(n(I))},null,6),ie(Ne,{id:c.range?void 0:n(W),ref_key:"firstButton",ref:d,"model-value":n(u),vertical:c.vertical,"tooltip-class":c.tooltipClass,placement:c.placement,role:"slider","aria-label":c.range||!n(_)?n(G):void 0,"aria-labelledby":!c.range&&n(_)?(he=n(f))==null?void 0:he.labelId:void 0,"aria-valuemin":c.min,"aria-valuemax":c.range?n(h):c.max,"aria-valuenow":n(u),"aria-valuetext":n(q),"aria-orientation":c.vertical?"vertical":"horizontal","aria-disabled":n(o),"onUpdate:modelValue":n(y)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),c.range?(M(),ue(Ne,{key:0,ref_key:"secondButton",ref:b,"model-value":n(h),vertical:c.vertical,"tooltip-class":c.tooltipClass,placement:c.placement,role:"slider","aria-label":n(J),"aria-valuemin":n(u),"aria-valuemax":c.max,"aria-valuenow":n(h),"aria-valuetext":n(j),"aria-orientation":c.vertical?"vertical":"horizontal","aria-disabled":n(o),"onUpdate:modelValue":n(i)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):ae("v-if",!0),c.showStops?(M(),X("div",At,[(M(!0),X(re,null,de(n(T),(L,ee)=>(M(),X("div",{key:ee,class:K(n(s).e("stop")),style:Q(n(z)(L))},null,6))),128))])):ae("v-if",!0),n(R).length>0?(M(),X(re,{key:2},[Z("div",null,[(M(!0),X(re,null,de(n(R),(L,ee)=>(M(),X("div",{key:ee,style:Q(n(z)(L.position)),class:K([n(s).e("stop"),n(s).e("marks-stop")])},null,6))),128))]),Z("div",{class:K(n(s).e("marks"))},[(M(!0),X(re,null,de(n(R),(L,ee)=>(M(),ue(n(Wt),{key:ee,mark:L.mark,style:Q(n(z)(L.position))},null,8,["mark","style"]))),128))],2)],64)):ae("v-if",!0)],38),c.showInput&&!c.range?(M(),ue(n(et),{key:0,ref:"input","model-value":n(u),class:K(n(s).e("input")),step:c.step,disabled:n(o),controls:c.showInputControls,min:c.min,max:c.max,debounce:c.debounce,size:n(S),"onUpdate:modelValue":n(y),onChange:n(B)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):ae("v-if",!0)],42,$t)}}});var Yt=Ie(Xt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const Kt=Qe(Yt);const Ot={class:"home"},Ut={name:"buttonTest"},Gt=Object.assign(Ut,{setup(e){let t=H(180),a=Ze();return(l,s)=>{const m=Kt;return M(),X("div",Ot,[ie(De,{size:n(t),modelValue:n(a),"onUpdate:modelValue":s[0]||(s[0]=r=>Ee(a)?a.value=r:a=r)},null,8,["size","modelValue"]),ie(m,{modelValue:n(t),"onUpdate:modelValue":s[1]||(s[1]=r=>Ee(t)?t.value=r:t=r),min:30,max:1e3},null,8,["modelValue"])])}}});export{Gt as default};
